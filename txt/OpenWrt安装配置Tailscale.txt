tailscale.com

https://blog.csdn.net/qq_29064203/article/details/135421752
OpenWrt安装Tailscale

https://github.com/adyanth/openwrt-tailscale-enabler/releases



https://iqotom.com/?p=1873
OpenWrt安装配置Tailscale实现内网穿透，异地组网

下载软件,解压缩软件
wget https://github.com/adyanth/openwrt-tailscale-enabler/releases/download/v1.60.0-e428948-autoupdate/openwrt-tailscale-enabler-v1.60.0-e428948-autoupdate.tgz
tar x -zvC / -f openwrt-tailscale-enabler-v1.60.0-e428948-autoupdate.tgz

安装依赖包
opkg update
opkg install libustream-openssl ca-bundle kmod-tun

设置开机启动，验证开机启动
/etc/init.d/tailscale enable
ls /etc/rc.d/S*tailscale*

启动tailscale
/etc/init.d/tailscale start

获取登录链接，配置路由
tailscale up --accept-routes --accept-dns=false --advertise-routes=192.168.11.0/24 



将以下内容，加到防火墙的自定义规则当中，并重启防火墙。

iptables -I FORWARD -i tailscale0 -j ACCEPT
iptables -I FORWARD -o tailscale0 -j ACCEPT
iptables -t nat -I POSTROUTING -o tailscale0 -j MASQUERADE



验证：

tailscale status

tailscale ping 100.100.69.105


-----------------------------------

docker

version: '3.7'
services:
    tailscale:
        container_name: tailscale
        volumes:
            - /srv/config/tailscale/var/lib:/var/lib
            - /srv/config/tailscale/dev/net/tun:/dev/net/tun
        network_mode: host
        restart: unless-stopped
        environment:
            - TS_AUTHKEY=     ????TS_AUTHKEY 
            - TS_EXTRA_ARGS=--advertise-exit-node
            - TS_ROUTES=192.168.31.0/24
            - TS_HOSTNAME=hk1-box
            - TS_STATE_DIR=./state/
        image: tailscale/tailscale:v1.80.0


docker run -d --name=tailscaled -v /var/lib:/var/lib -v /dev/net/tun:/dev/net/tun --network=host --cap-add=NET_ADMIN --cap-add=NET_RAW tailscale/tailscale


docker pull tailscale/tailscale:v1.80.0
