换一种方法修改hosts文件！一个OpenWRT的自用小功能
各个撸代码的大大，尤其是跟网站有关的，经常跟hosts文件打交道，想必其作用我就不必说了，我一般这么操作：

1.Win+R打开运行，输入system32；

2.找到cmd，右键，以管理员身份运行（windows 7以上的系统可以使用Win+X，命令提示符（管理员），这样可以更快捷）；

3.输入命令：notepad drivers/etc/hosts；

4.修改hosts文件。

这个步骤相当的繁琐，不熟练的人要操作的更多，而且修改的hosts文件只对本电脑有效，还有一个情况，hosts文件有时候会保存不了，总是提示另存为，大概是某个逗B程序给改了，或者没有修改的权限，总之，很烦！






--------------------------------

我今天就是被这个搞得火大，才想到去折腾一下路由器的（此方法纯属自己摸索，觉得小儿科的，请忍耐~）。

好了，下面开始正题：

1.首先，你得是智能路由器，最好是OpenWRT系统，或者PandoraBox。

我用的是小米路由器mini版，对，就是129买的那个，这东西本身是MIWIFI系统，是基于OpenWRT开发的，稍微吐槽一下，国内厂商所有基于XXX开发的东西，我一个都看不上，真的~于是我选择了自己刷系统，具体刷的过程我就不赘述了，论坛里面大把，简单步骤交代一下：开启ssh，备份原系统，刷不死uboot，刷OpenWRT。

刷完以后，登录进去：



2.我们等会儿要使用ssh登录路由器，设置一下登录密码，步骤：系统，管理权，拉到最底部。



3.登录ssh，这里我们用putty吧。



怎么样，是不是很激动？

5.新建一个自己的hosts文件，我们取名叫myhosts，只需要输入命令：vi /etc/myhosts，关于vi的用法，我也不说了。

6.把你的hosts规则写进去，保存，退出。



7.回到路由器后台，网络，DHCP/DNS：



这里在额外的HOSTS文件后面填上/etc/myhosts。

8.所有设置都完成了，重启路由器（可直接执行reboot），以后要添加hosts，只需要vi /etc/myhosts保存即可~

好处：

你不用担心文件保存不了；

只要路由器不坏，你的电脑重装系统完全不用重新改hosts文件；

局域网里面所有设备都遵循这个myhosts文件里的规则，因此在你想在手机或者平板上访问你自己的页面的时候，这个东西尤其好用，比如你在做响应式网页的开发。



重点1：需要重启dnsmasq服务才能生效

/etc/init.d/dnsmasq restart

重点2：电脑网卡配置的dns必须是路由上的dns才能生效